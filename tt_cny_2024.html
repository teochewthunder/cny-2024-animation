<!DOCTYPE html>
<html>
	<head>
		<title>Year of the Dragon</title>

		<style>
			body
			{
				background-color: rgb(200, 100, 100);
			}

			#container
			{
/*				background: url(dragon.png);
*/				width: 500px;
				margin: 10px auto 0 auto;
			}

			.row
			{
				height: 10px;
				width: 100%;
			}

			.square
			{
				width: 10px;
				height: 10px;
				outline: 0px solid red;
				float: left;
			}

			.shade0
			{
				background-color: transparent;
			}

			.shade1
			{
				background-color: rgba(255, 155, 0, 1);
			}

			.shade2
			{
				background-color: rgba(255, 155, 0, 0.7);
			}

			.shade3
			{
				background-color: rgba(255, 155, 0, 0.3);
			}
		</style>

		<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

		<script>
			let cny = 
			{
				grid: 
				[
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,3,2,2,2,1,1,1,1,1,1,1,1,2,0,0,0,0,0,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,3,0,0,0,0,0,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,3,3,2,2,2,2,2,3,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,3,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,3,0,0,1,1,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,0,0,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,2,1,2,2,1,1,2,3,3,3,3,3,1,1,2,3,3,3,3,0,0,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,2,1,2,0,0,0,0,3,1,1,2,0,0,0,0,0,0,2,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,3,0,0,0,2,1,1,3,0,0,0,0,0,0,2,1,1,1,1,1,1,2,3,3,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,2,3,0,3,1,1,1,3,0,0,0,0,0,0,3,1,1,1,1,1,1,1,1,1,2,3,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,2,2,0,0,3,1,1,1,1,1,1,1,2,0,0,0,0,0,0,0,0,3,2,2,1,1,1,1,1,1,1,2,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,3,1,1,3,0,0,2,1,1,1,1,2,3,0,0,2,1,3,0,0,0,0,0,0,0,0,0,0,3,2,1,1,1,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,3,1,1,3,0,0,3,1,1,1,2,0,0,0,3,1,1,2,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,3,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,3,1,1,2,0,0,0,2,1,1,3,0,0,0,3,1,1,2,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,3,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,1,1,2,0,0,0,3,1,1,3,0,0,0,3,1,1,2,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,3,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,2,1,1,3,0,0,3,1,1,3,0,0,0,2,1,1,2,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,3,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,2,1,1,1,2,2,1,1,1,1,3,3,2,1,1,1,3,0,0,0,0,0,0,0,0,0,0,3,2,1,1,1,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,3,3,2,2,2,1,1,1,1,1,2,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,3,2,1,1,1,1,1,1,1,1,1,1,1,2,3,0,0,0,0,2,1,1,1,1,1,1,1,1,1,2,3,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,3,3,2,1,1,1,1,1,2,3,3,3,0,0,0,0,0,2,1,1,1,2,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,1,1,2,0,0,0,0,0,0,0,0,0,2,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,2,0,0,0,0,0,0,0,0,3,1,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,1,3,0,0,0,0,0,0,0,3,1,1,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,1,1,1,1,2,2,3,0,0,0,0,0,2,1,1,1,1,1,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,3,2,1,1,1,1,1,1,1,1,1,3,0,0,0,0,2,1,1,1,1,1,1,1,1,1,2,3,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,3,1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,2,1,1,3,0,3,2,1,1,1,1,1,2,3,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,3,1,1,1,2,3,0,0,0,0,3,2,1,1,2,0,0,0,2,1,1,3,0,0,0,3,3,2,1,1,1,1,2,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,2,1,1,1,3,0,0,0,0,0,0,3,2,1,1,3,0,0,2,1,1,2,0,0,0,0,0,0,3,2,1,1,1,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,3,2,1,1,1,1,2,0,0,0,0,0,0,3,1,1,3,0,0,2,1,1,1,2,3,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,2,1,1,2,2,1,1,2,3,0,0,0,0,3,1,1,3,0,0,2,1,1,1,1,2,2,2,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,2,1,2,0,0,3,2,1,2,3,0,0,0,3,1,1,3,0,0,2,1,1,1,2,2,2,1,1,2,3,3,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,1,1,2,3,0,0,3,2,1,2,0,0,0,3,1,1,3,0,0,2,1,1,2,3,0,3,3,2,1,1,1,2,2,3,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,1,1,1,2,0,0,0,3,2,1,2,0,0,3,1,1,3,0,0,2,1,1,3,0,0,0,0,3,3,2,1,1,1,1,3,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,1,1,1,1,2,3,0,0,3,2,1,3,0,3,1,1,3,0,0,2,1,1,3,0,0,0,0,0,0,0,3,2,2,2,3,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,1,1,2,1,1,1,3,0,0,3,1,2,0,3,1,1,3,0,0,2,1,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,1,1,0,3,2,1,1,3,0,0,2,3,0,2,1,1,3,0,0,2,1,1,1,1,2,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,1,1,0,0,3,1,1,2,0,0,0,0,0,2,1,2,0,0,0,2,1,1,1,1,1,1,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,1,1,3,0,0,2,1,1,3,0,0,0,0,2,1,2,0,0,0,2,1,1,2,2,2,2,1,1,1,2,2,3,3,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,1,1,3,0,0,3,1,1,2,0,0,0,3,1,1,3,0,0,0,3,1,1,3,0,0,3,3,2,1,1,1,1,1,2,3,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,1,1,3,0,0,0,2,1,2,0,0,0,2,1,1,3,0,0,0,3,1,1,3,0,0,0,0,0,3,2,1,1,1,1,1,3,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,3,1,1,3,0,0,0,3,2,2,0,0,3,2,1,2,0,0,0,0,3,1,1,2,0,0,0,0,0,0,0,3,3,2,1,1,3,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,1,1,2,0,0,0,0,3,0,0,0,2,1,1,3,0,0,0,0,0,2,1,1,2,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,2,1,3,0,0,0,0,0,0,3,2,1,1,2,0,0,0,0,0,0,3,1,1,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,3,2,0,0,0,0,0,0,3,2,1,1,2,0,0,0,0,0,0,0,0,2,1,1,1,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,1,1,2,0,0,0,0,0,0,0,0,0,0,3,2,1,1,1,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,1,1,1,1,2,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,2,1,1,1,2,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,1,1,1,2,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,2,1,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,1,1,1,3,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,3,2,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,2,3,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,3,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,1,3,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,3,2,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,1,1,2,3,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,3,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,1,3,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,2,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,3,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,1,1,2,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,3,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,1,3,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,3,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,3,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,3,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,3,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,3,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,2,3,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,3,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,3,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
					[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
				],
				fillGrid: function() 
				{
					for(var i = 0; i < this.grid.length; i++) 
					{
						var row = $("<div></div>");
						row.addClass("row");

						for(var j = 0; j < this.grid[i].length; j++) 
						{
							var square = $("<div></div>");
							square.addClass("square");
							square.addClass("shade" + this.grid[i][j]);

							row.append(square);
						}

						$("#container").append(row);
					}
				},
				getColor: function(transparency, original)
				{
					var t = [0, 1, 0.7, 0.3];
					var useT = t[transparency];

					if (!original) 
					{
						if (useT > 0)
						{
							var subtract = (Math.floor(Math.random() * 10) + 1) / 10;
							useT -= subtract;
							if (useT < 0) useT = 0;
						}
					}

					return "rgba(rgba(255, 155, 0, " + useT + ")";
				},
				changeColor: function(delay)
				{
					for (var i = 1; i <= 3; i++)
					{
						$(".shade" + i).each(
							function( index ) 
							{
						  		cny.changeColorForObj(this, i, delay);
							}
						);						
					}
				},
				changeColorForObj: function(obj, index, delay)
				{
					$(obj).animate
					(
						{
							backgroundColor: cny.getColor(index, false)
						},
						delay
					);

					setTimeout(
						function() 
						{
							$(obj).animate
							(
								{
									backgroundColor: cny.getColor(index, true)
								},
								delay
							);
						},
						delay
					)
				},
				start: function(delay)
				{
					setInterval(
						function() 
						{
							cny.changeColor(delay)
						},
						delay * 2
					)
				}
			}
		</script>
	</head>

	<body onload = "cny.fillGrid();cny.start(500);">
		<div id="container">

		</div>
	</body>
</html>